{"ast":null,"code":"import axios from 'axios';\nimport jwtDecode from 'jwt-decode';\nimport { API_URL, JWT_SECRET } from './config';\naxios.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  if (error.response.status === 401) {\n    localStorage.removeItem('token');\n    window.location = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const login = async (username, password) => {\n  const response = await axios.post(`${API_URL}/auth/token/`, {\n    username: username,\n    password: password\n  });\n  const token = response.data.access;\n  localStorage.setItem('token', token);\n  const user = jwtDecode(token);\n  return user;\n};\nexport const logout = () => {\n  localStorage.removeItem('token');\n};\nexport const register = async (username, password) => {\n  const response = await axios.post(`${API_URL}/auth/register/`, {\n    username: username,\n    password: password\n  });\n  const token = response.data.access;\n  localStorage.setItem('token', token);\n  const user = jwtDecode(token);\n  return user;\n};\nexport const getBooks = async () => {\n  const response = await axios.get(`${API_URL}/books/`);\n  const books = response.data;\n  return books;\n};\nexport const getBook = async id => {\n  const response = await axios.get(`${API_URL}/books/${id}/`);\n  const book = response.data;\n  return book;\n};\nexport const createBook = async data => {\n  const response = await axios.post(`${API_URL}/books/`, data);\n  const book = response.data;\n  return book;\n};\nexport const updateBook = async (id, data) => {\n  const response = await axios.put(`${API_URL}/books/${id}/`, data);\n  const book = response.data;\n  return book;\n};\nexport const deleteBook = async id => {\n  const response = await axios.delete(`${API_URL}/books/${id}/`);\n  const book = response.data;\n  return book;\n};","map":{"version":3,"names":["axios","jwtDecode","API_URL","JWT_SECRET","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","status","removeItem","window","location","login","username","password","post","data","access","setItem","user","logout","register","getBooks","get","books","getBook","id","book","createBook","updateBook","put","deleteBook","delete"],"sources":["/home/marwan/django-react/my-react-app/src/services.js"],"sourcesContent":["import axios from 'axios';\nimport jwtDecode from 'jwt-decode';\nimport { API_URL, JWT_SECRET } from './config';\n\naxios.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\naxios.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    if (error.response.status === 401) {\n      localStorage.removeItem('token');\n      window.location = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const login = async (username, password) => {\n  const response = await axios.post(`${API_URL}/auth/token/`, {\n    username: username,\n    password: password,\n  });\n  const token = response.data.access;\n  localStorage.setItem('token', token);\n  const user = jwtDecode(token);\n  return user;\n};\n\nexport const logout = () => {\n  localStorage.removeItem('token');\n};\n\nexport const register = async (username, password) => {\n  const response = await axios.post(`${API_URL}/auth/register/`, {\n    username: username,\n    password: password,\n  });\n  const token = response.data.access;\n  localStorage.setItem('token', token);\n  const user = jwtDecode(token);\n  return user;\n};\n\nexport const getBooks = async () => {\n  const response = await axios.get(`${API_URL}/books/`);\n  const books = response.data;\n  return books;\n};\n\nexport const getBook = async (id) => {\n  const response = await axios.get(`${API_URL}/books/${id}/`);\n  const book = response.data;\n  return book;\n};\n\nexport const createBook = async (data) => {\n  const response = await axios.post(`${API_URL}/books/`, data);\n  const book = response.data;\n  return book;\n};\n\nexport const updateBook = async (id, data) => {\n  const response = await axios.put(`${API_URL}/books/${id}/`, data);\n  const book = response.data;\n  return book;\n};\n\nexport const deleteBook = async (id) => {\n  const response = await axios.delete(`${API_URL}/books/${id}/`);\n  const book = response.data;\n  return book;\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,OAAO,EAAEC,UAAU,QAAQ,UAAU;AAE9CH,KAAK,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAACC,aAAa,GAAI,UAASJ,KAAM,EAAC;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACAM,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAEDb,KAAK,CAACI,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC5BU,QAAQ,IAAK;EACZ,OAAOA,QAAQ;AACjB,CAAC,EACAH,KAAK,IAAK;EACT,IAAIA,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACjCR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;IAChCC,MAAM,CAACC,QAAQ,GAAG,QAAQ;EAC5B;EACA,OAAON,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,OAAO,MAAMQ,KAAK,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,KAAK;EACjD,MAAMP,QAAQ,GAAG,MAAMhB,KAAK,CAACwB,IAAI,CAAE,GAAEtB,OAAQ,cAAa,EAAE;IAC1DoB,QAAQ,EAAEA,QAAQ;IAClBC,QAAQ,EAAEA;EACZ,CAAC,CAAC;EACF,MAAMf,KAAK,GAAGQ,QAAQ,CAACS,IAAI,CAACC,MAAM;EAClCjB,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAEnB,KAAK,CAAC;EACpC,MAAMoB,IAAI,GAAG3B,SAAS,CAACO,KAAK,CAAC;EAC7B,OAAOoB,IAAI;AACb,CAAC;AAED,OAAO,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAC1BpB,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;AAClC,CAAC;AAED,OAAO,MAAMY,QAAQ,GAAG,MAAAA,CAAOR,QAAQ,EAAEC,QAAQ,KAAK;EACpD,MAAMP,QAAQ,GAAG,MAAMhB,KAAK,CAACwB,IAAI,CAAE,GAAEtB,OAAQ,iBAAgB,EAAE;IAC7DoB,QAAQ,EAAEA,QAAQ;IAClBC,QAAQ,EAAEA;EACZ,CAAC,CAAC;EACF,MAAMf,KAAK,GAAGQ,QAAQ,CAACS,IAAI,CAACC,MAAM;EAClCjB,YAAY,CAACkB,OAAO,CAAC,OAAO,EAAEnB,KAAK,CAAC;EACpC,MAAMoB,IAAI,GAAG3B,SAAS,CAACO,KAAK,CAAC;EAC7B,OAAOoB,IAAI;AACb,CAAC;AAED,OAAO,MAAMG,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,MAAMf,QAAQ,GAAG,MAAMhB,KAAK,CAACgC,GAAG,CAAE,GAAE9B,OAAQ,SAAQ,CAAC;EACrD,MAAM+B,KAAK,GAAGjB,QAAQ,CAACS,IAAI;EAC3B,OAAOQ,KAAK;AACd,CAAC;AAED,OAAO,MAAMC,OAAO,GAAG,MAAOC,EAAE,IAAK;EACnC,MAAMnB,QAAQ,GAAG,MAAMhB,KAAK,CAACgC,GAAG,CAAE,GAAE9B,OAAQ,UAASiC,EAAG,GAAE,CAAC;EAC3D,MAAMC,IAAI,GAAGpB,QAAQ,CAACS,IAAI;EAC1B,OAAOW,IAAI;AACb,CAAC;AAED,OAAO,MAAMC,UAAU,GAAG,MAAOZ,IAAI,IAAK;EACxC,MAAMT,QAAQ,GAAG,MAAMhB,KAAK,CAACwB,IAAI,CAAE,GAAEtB,OAAQ,SAAQ,EAAEuB,IAAI,CAAC;EAC5D,MAAMW,IAAI,GAAGpB,QAAQ,CAACS,IAAI;EAC1B,OAAOW,IAAI;AACb,CAAC;AAED,OAAO,MAAME,UAAU,GAAG,MAAAA,CAAOH,EAAE,EAAEV,IAAI,KAAK;EAC5C,MAAMT,QAAQ,GAAG,MAAMhB,KAAK,CAACuC,GAAG,CAAE,GAAErC,OAAQ,UAASiC,EAAG,GAAE,EAAEV,IAAI,CAAC;EACjE,MAAMW,IAAI,GAAGpB,QAAQ,CAACS,IAAI;EAC1B,OAAOW,IAAI;AACb,CAAC;AAED,OAAO,MAAMI,UAAU,GAAG,MAAOL,EAAE,IAAK;EACtC,MAAMnB,QAAQ,GAAG,MAAMhB,KAAK,CAACyC,MAAM,CAAE,GAAEvC,OAAQ,UAASiC,EAAG,GAAE,CAAC;EAC9D,MAAMC,IAAI,GAAGpB,QAAQ,CAACS,IAAI;EAC1B,OAAOW,IAAI;AACb,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}